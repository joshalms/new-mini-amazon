{% extends "base.html" %}

{% block content %}
<div class="container py-4" style="max-width: 720px;">
  <div class="card shadow-sm mb-4">
    <div class="card-body">
      <h3 class="card-title mb-2">Public Profile</h3>
      <p class="text-muted mb-4">Account #{{ user_info.id }}</p>
      <dl class="row">
        <dt class="col-sm-4">Full Name</dt>
        <dd class="col-sm-8">{{ user_info.full_name }}</dd>
        {% if is_seller %}
        <dt class="col-sm-4">Email</dt>
        <dd class="col-sm-8">{{ user_info.email }}</dd>
        <dt class="col-sm-4">Address</dt>
        <dd class="col-sm-8">{{ user_info.address }}</dd>
        {% else %}
        <dt class="col-sm-4">Email</dt>
        <dd class="col-sm-8 text-muted">Hidden (not a seller)</dd>
        <dt class="col-sm-4">Address</dt>
        <dd class="col-sm-8 text-muted">Hidden (not a seller)</dd>
        {% endif %}
        <dt class="col-sm-4">Member Since</dt>
        <dd class="col-sm-8">{{ user_info.created_at.strftime('%b %d, %Y') if user_info.created_at else '' }}</dd>
      </dl>
      <div class="mt-4">
        <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('users.users_me') }}">My Account</a>
      </div>
    </div>
  </div>

  {% if is_seller %}
  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <h5 class="card-title">Seller Rating</h5>
      {% if seller_summary.review_count %}
      <p class="h2 mb-1">
        {{ '%.1f'|format(seller_summary.average_rating or 0) }}
        <small class="text-muted">/ 5</small>
      </p>
      <p class="text-muted">{{ seller_summary.review_count }} total reviews</p>
      {% else %}
      <p class="text-muted mb-0">No seller reviews yet.</p>
      {% endif %}
    </div>
  </div>

  <div class="card shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-3">Seller Reviews</h5>
      {% if seller_reviews %}
      {% for review in seller_reviews %}
      <div class="border rounded p-3 mb-3">
        <div class="d-flex justify-content-between mb-2">
          <strong>Rating: {{ review.rating }}/5</strong>
          <small class="text-muted">
            {{ review.created_at.strftime('%b %d, %Y %I:%M %p') if review.created_at else '' }}
          </small>
        </div>
        <p class="mb-2">{{ review.body or 'No comment provided.' }}</p>
        <div class="text-muted small">By {{ review.reviewer_name }} (User #{{ review.reviewer_id }})</div>
      </div>
      {% endfor %}
      {% else %}
      <p class="text-muted mb-0">This seller has not received any reviews yet.</p>
      {% endif %}
    </div>
  </div>
  {% else %}
  <div class="alert alert-info">This user has not sold any items yet, so seller details are hidden.</div>
  {% endif %}
</div>
{% endblock %}
