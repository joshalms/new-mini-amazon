<!-- Container for products -->
<table id="products-table" class="products-table">
    <thead>
        <tr>
            <th>Name</th>
            <th>Price</th>
            <th>Available</th>
        </tr>
    </thead>
    <tbody id="products-body">
    </tbody>
</table>

<script>
async function fetchTopProducts(k=1) {
    const response = await fetch(`/api/products/topk?k=${k}`);
    const products = await response.json();
    const tbody = document.getElementById('products-body');

    // Clear old results
    tbody.innerHTML = '';

    // Insert rows
    products.forEach(p => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${p.name}</td>
            <td>$${p.price}</td>
            <td>${p.available ? 'Yes' : 'No'}</td>
        `;
        tbody.appendChild(row);
    });
}

fetchTopProducts();

document.getElementById('top-k-form').addEventListener('submit', (e) => {
    e.preventDefault();
    const k = document.getElementById('k').value;
    fetchTopProducts(k);
});
</script>
